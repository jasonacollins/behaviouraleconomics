{
  "hash": "c34204b10819dd89afb92548380b76b1",
  "result": {
    "markdown": "# Expected utility examples\n\n## Example 1\n\nSuppose your utility function is $U(x)=ln(x)$.\n\nYou have a 50% chance of winning \\$10 and a 50% chance of losing \\$10. Assume your starting wealth is \\$20.\n\nWhat is the expected value of this game?\n\n\\begin{align*}\nE[x]&=\\sum_{i=1}^n p_ix_i \\\\[6pt]\n&=0.5*10+0.5*(-10) \\\\[6pt]\n&=0\n\\end{align*}\n\nThe expected value of the game is \\$0.\n\nWhat is the expected utility of this game?\n\n\\begin{align*}\nE[U(W+x)]&=\\sum_{i=1}^n p_iU(x_i+W) \\\\[6pt]\n&=0.5U(20-10)+0.5U(20+10) \\\\[6pt]\n&=0.5ln(10)+0.5ln(30) \\\\[6pt]\n&=2.85\n\\end{align*}\n\nWhat does an expected utility of 2.85 mean? To make it tangible, we can ask what wealth would give that utility.\n\n\n\n$$U(W)=ln(W)=2.85$$\n\n$$W=e^{2.85}=\\$17.30$$\n\n\n\nThis gamble with expected value of zero reduces utility by an amount equivalent to \\$2.70. \n\n![](img/expected-utility-example.jpg)\n\nWe could also say that the certainty equivalent of this gamble is final wealth of \\$17.30, a loss of $2.70.\n\n## Example 2\n\nSuppose your utility function is $\\small U(x)=ln(x)$.\n\nYou have an 80% chance of winning \\$10 and a 50% chance of losing \\$10. Assume your starting wealth is \\$20.\n\nWhat is the expected value and the expected utility of this game?\n\n\\begin{align*}\nE[x]&=\\sum_{i=1}^n p_ix_i \\\\[6pt]\n&=0.8*10+0.2*(-10) \\\\[6pt]\n&=\\$6\n\\end{align*}\n\nThe expected value of the game is \\$6.\n\n\\begin{align*}\nE[U(W+x)]&=\\sum_{i=1}^n p_iU(x_i+W) \\\\[6pt]\n&=0.8U(20+10)+0.2U(20-10) \\\\[6pt]\n&=0.8ln(30)+0.2ln(10) \\\\[6pt]\n&=3.18\n\\end{align*}\n\nWhat does an expected utility of 3.18 mean? To make it tangible, we can ask what wealth would give that utility.\n\n\n\n$$U(W)=ln(W)=3.18$$\n\n$$W=e^{3.18}=\\$24.08$$\n\n\n\nThis gamble with expected value of \\$6 increases utility by an amount equivalent to \\$4.08. \n\n![](img/expected-utility-example-2.jpg)\n\n## Example 3\n\nSuppose your utility function is $U(x)=ln(x)$.\n\nYou have a 50% chance of increasing your wealth by 50% and a 50% chance of decreasing your wealth by 40%.\n\nWhat is the expected value and the expected utility of this games?\n\n\\begin{align*}\nE[U(X)]&=\\sum_{i=1}^n p_iU(X_i) \\\\[6pt]\n&=0.5U(0.6W)+0.5U(1.5W) \\\\[6pt]\n&=0.5ln(0.6)+0.5*ln(W)+0.5ln(1.5)+0.5*ln(W) \\\\[6pt]\n&=-0.255+0.203+ln(W) \\\\[6pt]\n&=−0.053+ln(W)\n\\end{align*}\n\nHere we have a gamble with a positive expected value, 5% of your wealth, but lower expected utility. Someone with log utility would reject this bet.\n\n![](img/expected-utility-example-3.jpg)\n\n## Example 4: The St. Petersburg game\n\nThe St. Petersburg game was invented by Swiss mathematician Nicolas Bernoulli.\n\nThe game starts with a pot containing \\$2. A dealer then flips a coin. The pot doubles every time a head appears. The game ends and the player win the pot as soon as tails appears.\n\n- Tail on the first flip: \\$2\n- Tail on the second flip: \\$4\n- Tail on the third flip: \\$8\n- Tail on the fourth flip: \\$16\n\nAnd so on.\n\nThe expected value of this game is equal to:\n\n\\begin{align*}\nE[X]&=\\underbrace{\\frac{1}{2}*2}_\\textrm{Tail first}+\\underbrace{(\\frac{1}{2}*\\frac{1}{2})*4}_\\textrm{Tail second}+\\underbrace{(\\frac{1}{2}*\\frac{1}{2}*\\frac{1}{2})*8}_\\textrm{Tail third} \\\\[24pt]\n&\\qquad +\\underbrace{(\\frac{1}{2}*\\frac{1}{2}*\\frac{1}{2}*\\frac{1}{2})*16}_\\textrm{Tail fourth}+... \\\\[24pt]\n&=1+1+1+1+... \\\\\n&=\\sum_{k=1}^\\infty 1 \\\\\n&=\\infty\n\\end{align*}\n\nThe $\\sum$ operator means “sum for $k=1$ to $k=\\infty$”.\n\nThe expected utility of this game is equal to:\n\n\\begin{align*}\nE[U(X)]&=\\underbrace{\\frac{1}{2}*U(W+2)}_\\textrm{Tail first}+\\underbrace{(\\frac{1}{2}*\\frac{1}{2})*U(W+4)}_\\textrm{Tail second} \\\\[24pt] \n&\\qquad +\\underbrace{(\\frac{1}{2}*\\frac{1}{2}*\\frac{1}{2})*U(W+8)}_\\textrm{Tail third}\n+\\underbrace{(\\frac{1}{2}*\\frac{1}{2}*\\frac{1}{2}*\\frac{1}{2})*U(W+16)}_\\textrm{Tail fourth}+... \\\\[24pt]\n&=\\frac{1}{2}U(W+2)+\\frac{1}{4}U(W+4)+\\frac{1}{8}U(W+8)+\\frac{1}{16}U(W+16)+...  \\\\[12pt]\n&=\\sum_{k=1}^{k=\\infty}\\frac{1}{2^k}U(W+2^k)\n\\end{align*}\n\nWhat is the maximum \\$$c$ a risk neutral player with $U(x)=x$ would be willing to pay to play the game? One strategy to determine \\$$c$ is to ask at what \\$$c$ the player would be indifferent between accepting and rejecting a chance to play. That is the maximum \\$$c$ that they would be willing to pay. They will be indifferent when $U(W)=E[U(X-c)]$.\n\n\\begin{align*}\nU(W)&=E[U(X-c)] \\\\[6pt]\nU(W)&=\\sum_{k=1}^{k=\\infty}\\frac{1}{2^k}(U(W+\\$2^k-c) \\\\[6pt]\nW&=\\sum_{k=1}^{k=\\infty}\\frac{1}{2^k}(W+2^k-c) \\\\[6pt]\nW&=W-c+\\sum_{k=1}^{k=\\infty}1 \\qquad \\bigg(\\text{as }\\sum_{k=1}^{k=\\infty}\\frac{1}{2^k}=1\\bigg) \\\\[12pt]\nc&=\\infty\n\\end{align*}\n\nA risk-neutral player would pay any amount \\$$c$ to play.\n\nWhat is the maximum $\\$c$ a risk averse player with $U(x)=ln(x)$ player would be willing to pay to play the game? How does their wealth affect their willingness to pay?\n\nAgain we will determine at what \\$$c$ the player is indifferent between accepting and rejecting a chance to play, which occurs when $U(W)=E[U(X-c)]$.\n\n\\begin{align*}\nU(W)&=E[U(X-c)] \\\\[6pt]\nU(W)&=\\sum_{k=1}^{k=\\infty}\\frac{1}{2^k}U(W+\\$2^k-c) \\\\[6pt]\nln(W)&=\\sum_{k=1}^{k=\\infty}\\frac{1}{2^k}ln(W+\\$2^k-c)\n\\end{align*}\n\n\n\n::: {.cell}\n\n:::\n\n\n\nThere is no closed form solution to this equation to enable us to determine $c$. It needs to be solved via numerical methods (such as testing and iterating to a solution). Someone who has wealth of \\$0.01 would be willing to pay up to \\$2.01 (they would need to borrow). Someone with wealth \\$1000 would be willing to pay \\$10.95, while a person with wealth of \\$1 million would be willing to pay \\$20.87.\n\nNote: we cannot solve for a person with no wealth as ln⁡(0) is undefined. \n\nAnother way to gain an intuition of what is happening to ask what is the utility of a risk averse player whose only asset is the opportunity to play this game.\n\n\\begin{align*}\nE[U(X)]&=\\sum_{k=1}^{k=\\infty}\\frac{1}{2^k}U(\\$2^k) \\\\[12pt]\n&=\\sum_{k=1}^{k=\\infty}\\frac{1}{2^k}ln(2^k) \\\\[12pt]\n&=\\sum_{k=1}^{k=\\infty}\\frac{k}{2^k}ln(2) \\\\[12pt]\n&=\\frac{1}{2}ln(2)+\\frac{2}{4}ln(2)+\\frac{3}{8}ln(2)+\\frac{4}{16}ln(2)+\\frac{5}{32}ln(2)+... \\\\[12pt]\n&=(\\frac{1}{2}+\\frac{1}{2}+\\frac{3}{8}+\\frac{1}{4}+\\frac{5}{32}+...)ln(2) \\\\[12pt]\n&=2ln(2)\n\\end{align*}\n\nThe change in utility from each flip rapidly converges as the series of fractions sums to two. The expected utility from the game is equal to the utility of \\$4 $(U(W)=ln(W)=2ln(2);\\space W=e^{2ln2}=4)$.\n\nWhy does willingness to pay increase with wealth?\n\nWith log utility, as wealth increases the slope of the log function increasingly approximates a linear function (the second derivative approaches zero). Hence, the gambler displays less risk averse (closer to risk neutral) behaviour.\n",
    "supporting": [
      "expected-utility-examples_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{},\"value\":[]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}